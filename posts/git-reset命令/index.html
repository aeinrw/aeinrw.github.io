<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>git reset命令</title>
    
      <meta name="description" content="1git reset --soft
2git reset --mix
3git reset --hard
在初学git时, git reset命令非常难以理解. 在理解了git的底层数据结构后, 这个命令的使用就比较清楚了.">
      <meta name="author" content="">
    
    <link href="https://aeinrw.github.io/an-old-hope.min.css" rel="stylesheet">
    <link href="https://aeinrw.github.io/style.css" rel="stylesheet">
    <link href="https://aeinrw.github.io/custom.css" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="https://aeinrw.github.io/apple-touch-icon.png">
    <link rel="icon" href="https://aeinrw.github.io/favicon.ico">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    <meta name="generator" content="Hugo 0.72.0" /> 
    
    <script>
    function setTheme() {
    const time = new Date();

    const prev = localStorage.getItem('date');
    const date = String(time.getMonth() + 1) + '.' + String(time.getDate());

    const now = time.getTime();
    let sunrise;
    let sunset;

    function setBodyClass() {
        if (now > sunrise && now < sunset) return;
        document.body.classList.add('dark');
    }

    if (date !== prev) {
        fetch('https://api.ipgeolocation.io/astronomy?apiKey=5ed37d85103e4defa5df4c5298ed5215')
        .then(res => res.json())
        .then(data => {
            sunrise = data.sunrise.split(':').map(Number);
            sunset = data.sunset.split(':').map(Number);
        })
        .catch(() => {
            sunrise = [7, 0];
            sunset = [19, 0];
        })
        .finally(() => {
            sunrise = time.setHours(sunrise[0], sunrise[1], 0);
            sunset = time.setHours(sunset[0], sunset[1], 0);
            setBodyClass();
            localStorage.setItem('sunrise', sunrise);
            localStorage.setItem('sunset', sunset);
        });
        localStorage.setItem('date', date);
    } else {
        sunrise = Number(localStorage.getItem('sunrise'));
        sunset = Number(localStorage.getItem('sunset'));
        setBodyClass();
    }
    }
    function switchMode() {
    if (document.body.classList.contains('dark')) {
        document.body.classList.remove('dark')
    } else {
        document.body.classList.add('dark')
    }
    }
</script>
    <body class="
                single
            ">
<script>
    setTheme();
</script>
<header class="header">
    <nav class="nav">
    <h1 class="logo"><a href="https://aeinrw.github.io/">aeinrw</a></h1>
    <ul class="menu">
        <li>
            <a href="/posts/"><i class="fa fa-list-ul"></i></a>
        </li>
        <li>
            <a href="/tags/"><i class="fa fa-tags"></i></a>
        </li>
        <li>
            <a href="http://github.com/aeinrw"><i class="fa fa-github"></i></a>
        </li>
        <li>
            <a href="javascript:switchMode()"><i class="fa fa-adjust"></i></a>
        </li>
    </ul>

    </nav>
</header>
</head>



<main class="main">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">git reset命令</h1>
    <div class="post-meta">May 27, 2020</div>
  </header>
  <footer class="post-footer">
    <ul class="post-tags">
        <li><a href="https://aeinrw.github.io/tags/git">git</a></li>
        <li><a href="https://aeinrw.github.io/tags/%E5%8E%9F%E7%90%86">原理</a></li>
    </ul>
  </footer>
  <div class="post-content"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>git reset --soft
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>git reset --mix
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>git reset --hard
</code></pre></div><p>在初学git时, <code>git reset</code>命令非常难以理解. 在理解了git的底层数据结构后, 这个命令的使用就比较清楚了.</p>
<h1 id="命令详解">命令详解</h1>
<h2 id="git-reset---soft">git reset &ndash;soft</h2>
<p>本来的HEAD指针指向版本库的最新commit, 如果使用<code>git reset --soft xxxx</code>命令, HEAD指针会指向响应的commit, 对暂存区和工作区不会产生影响, 只是改变HEAD指针的指向.</p>
<h2 id="git-reset---mix">git reset &ndash;mix</h2>
<p>添加<code>--mix</code>选项后, 除了HEAD指针会改变指向外, 暂存区也会改变. 暂存区被新指向的commit覆盖, 之前的暂存会消失, 但不影响工作区.</p>
<h2 id="git-reset---hard">git reset &ndash;hard</h2>
<p><code>--hard</code>选项会根据指向的commit覆盖工作区, 工作区的为保存修改会被覆盖, 这个命令是个危险的命令.</p>
<h1 id="区别">区别</h1>
<table>
<thead>
<tr>
<th align="center">选项</th>
<th align="center">HEAD</th>
<th align="center">暂存区</th>
<th align="center">工作区</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">&ndash;soft</td>
<td align="center">变化</td>
<td align="center">不变</td>
<td align="center">不变</td>
</tr>
<tr>
<td align="center">&ndash;mix</td>
<td align="center">变化</td>
<td align="center">变化</td>
<td align="center">不变</td>
</tr>
<tr>
<td align="center">&ndash;hard</td>
<td align="center">变化</td>
<td align="center">变化</td>
<td align="center">变化</td>
</tr>
</tbody>
</table></div>

  

</article>
</main><footer class="footer">
  <span>&copy; 2020 <a href="https://aeinrw.github.io/">aeinrw</a></span>
  <span>&middot;</span>
  <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</span>
  <span>&middot;</span>
  <span>Theme️ <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper</a></span>
</footer>
<script src="https://aeinrw.github.io/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>


</body>
</html>

